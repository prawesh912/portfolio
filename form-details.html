<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Contact Details — Submitted</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <header>
        <h1>Contact Form Details</h1>
    </header>

    <main class="card">
        <section id="submitted-data">
            <h2>Submitted Information</h2>
            <div id="details-output">
                <!-- JS will fill this -->
            </div>

            <p><a href="index.html">Back to site</a></p>
        </section>
    </main>

    <footer>
        <p>© 2025 Prawesh Kumar Gupta</p>
    </footer>

    <script>
        // Read stored form data from localStorage and display
        (function () {
            const output = document.getElementById('details-output');
            const raw = localStorage.getItem('contactForm');
            if (!raw) {
                output.innerHTML = '<p>No form data found. Please submit the form first.</p>';
                return;
            }
            try {
                const data = JSON.parse(raw);
                output.innerHTML = `
                    <p><strong>Name:</strong> ${escapeHtml(data.name)}</p>
                    <p><strong>Email:</strong> ${escapeHtml(data.email)}</p>
                    <p><strong>Message:</strong></p>
                    <p>${escapeHtml(data.message).replace(/\n/g, '<br>')}</p>
                    <p class="success">Form loaded from localStorage.</p>
                `;
            } catch (e) {
                output.innerHTML = '<p>Error reading saved data.</p>';
            }

            function escapeHtml(str) {
                return String(str)
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }
        })();
    </script>
</body>
</html>
